var t=Object.defineProperty,e=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);import{p as s}from"./phaser-DM0uoNMb.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class i extends s.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/Background/Green.png")}create(){this.scene.start("Preloader")}}const a={WINDOW_WIDTH:1008,WINDOW_HEIGHT:768,TERRAIN_TILE_SIZE:48,PLAYER_TILE_SIZE:32,BG_MUSIC_AUDIO:"bgMusic",BG_MUSIC_TEXTURE_PATH:"Audio/GameMusic.mp3",BUTTON_AUDIO:"button",BUTTON_AUDIO_TEXTURE_PATH:"Audio/button.mp3",DEBRIS_HIT_AUDIO:"debrisHit",DEBRIS_HIT_AUDIO_TEXTURE_PATH:"Audio/debrisHit.mp3",ENEMY_HIT_AUDIO:"enemyHit",ENEMY_HIT_AUDIO_TEXTURE_PATH:"Audio/enemyHit.mp3",PLAYER_JUMP_AUDIO:"playerJump",PLAYER_JUMP_AUDIO_TEXTURE_PATH:"Audio/playerJump.mp3",PLAYER_RUN_AUDIO:"run",PLAYER_RUN_AUDIO_TEXTURE_PATH:"Audio/run.mp3",GAME_OVER_AUDIO:"gmOver",GAME_OVER_AUDIO_TEXTURE_PATH:"Audio/gameOver.mp3",PLATFORM:"platform",UNSTABLE_PLATFORM:"unstablePlatform",UNSTABLE_PLATFORM_PATH:"Platforms/UnstableTerrain.png",PLATFORM_TEXTURE_PATH:"Platforms/Terrain.png",DEBRIS:"debris",DEBRIS_TEXTURE_PATH:"Platforms/Rock Head/Idle.png",ENEMY:"enemy",ENEMY_TEXTURE_PATH:"Platforms/Saw/On (38x38).png",PLAYER_IDLE:"playerIdle",PLAYER_RUN:"playerRun",PLAYER_JUMP:"playerJump",PLAYER_FALL:"playerFall",PLAYER_IDLE_TEXTURE_PATH:"Character/Ninja_Frog/Idle.png",PLAYER_RUN_TEXTURE_PATH:"Character/Ninja_Frog/Run.png",PLAYER_JUMP_TEXTURE_PATH:"Character/Ninja_Frog/Jump.png",PLAYER_FALL_TEXTURE_PATH:"Character/Ninja_Frog/Fall.png",POWER_UP:"powerUp",POWER_UP_TEXTURE_PATH:"Platforms/Spiked Ball/Chain.png",SCORE:0};class r{constructor(t,s,i,r,o){e(this,"platform"),this.platform=t.physics.add.staticGroup(),this.platform.create(s+a.TERRAIN_TILE_SIZE/2,i+a.TERRAIN_TILE_SIZE/2,r,o),this.platform.create(s+3*a.TERRAIN_TILE_SIZE/2,i+a.TERRAIN_TILE_SIZE/2,r,o),this.platform.create(s+5*a.TERRAIN_TILE_SIZE/2,i+a.TERRAIN_TILE_SIZE/2,r,o),this.platform.create(s+7*a.TERRAIN_TILE_SIZE/2,i+a.TERRAIN_TILE_SIZE/2,r,o)}}const o={platformPositions:[0,a.WINDOW_WIDTH-4*a.TERRAIN_TILE_SIZE,a.WINDOW_WIDTH/2-2*a.TERRAIN_TILE_SIZE],getRandomPlatformX:function(){const t=Math.floor(Math.random()*this.platformPositions.length);return this.platformPositions[t]}};class l{constructor(t){e(this,"debrisGroup"),this.debrisGroup=t.physics.add.group()}spawnDebris(t,e,s){const i=this.debrisGroup.create(e,s,a.DEBRIS);i.setGravityY(Phaser.Math.Between(200,400)),i.setVelocityX(Phaser.Math.Between(-50,50)),i.setAngularVelocity(Phaser.Math.Between(-100,100)),i.setBounce(0),i.setCollideWorldBounds(!1),i.allowGravity=!0}}class n{constructor(t,s,i,r){e(this,"player"),this.player=t.physics.add.sprite(s,i,r),t.anims.create({key:a.PLAYER_IDLE,frames:t.anims.generateFrameNumbers(a.PLAYER_IDLE,{start:0,end:10}),frameRate:10,repeat:-1}),t.anims.create({key:a.PLAYER_RUN,frames:t.anims.generateFrameNumbers(a.PLAYER_RUN,{start:0,end:11}),frameRate:10,repeat:-1}),t.anims.create({key:a.PLAYER_JUMP,frames:t.anims.generateFrameNumbers(a.PLAYER_JUMP,{start:0,end:0}),frameRate:10,repeat:-1}),t.anims.create({key:a.PLAYER_FALL,frames:t.anims.generateFrameNumbers(a.PLAYER_FALL,{start:0,end:0}),frameRate:10,repeat:-1})}}class h{constructor(t,s,i,r,o){e(this,"platform"),this.platform=t.physics.add.staticGroup();for(let e=0,l=0;e<a.WINDOW_WIDTH;e+=a.TERRAIN_TILE_SIZE,l++)this.platform.create(s+a.TERRAIN_TILE_SIZE*l+a.TERRAIN_TILE_SIZE/2,i+a.TERRAIN_TILE_SIZE/2,r,o)}}class E{constructor(t,s,i,r,o){e(this,"platform"),e(this,"isShaking",!1),this.platform=t.physics.add.group({allowGravity:!1,immovable:!0}),this.platform.children.iterate((t=>(t.body.setGravityY(300),!0))),this.platform.create(s+a.TERRAIN_TILE_SIZE/2,i+a.TERRAIN_TILE_SIZE/2,r,o),this.platform.create(s+3*a.TERRAIN_TILE_SIZE/2,i+a.TERRAIN_TILE_SIZE/2,r,o),this.platform.create(s+5*a.TERRAIN_TILE_SIZE/2,i+a.TERRAIN_TILE_SIZE/2,r,o),this.platform.create(s+7*a.TERRAIN_TILE_SIZE/2,i+a.TERRAIN_TILE_SIZE/2,r,o)}}class p{constructor(t,s,i){e(this,"enemy",null),e(this,"direction"),this.enemy=t.physics.add.sprite(s,i,a.ENEMY),this.enemy.setGravityY(0),this.enemy.setVelocityX(100),this.enemy.setBounce(1,0),t.textures.exists(a.ENEMY)?(t.anims.exists("spin")||t.anims.create({key:"spin",frames:t.anims.generateFrameNumbers(a.ENEMY,{start:0,end:7}),frameRate:10,repeat:-1}),this.enemy.play("spin")):console.error("Enemy texture not found!"),this.direction=1}update(){this.enemy&&(this.enemy.setVelocityY(0),(this.enemy.body.blocked.left||this.enemy.body.blocked.right)&&(this.direction*=-1,this.enemy.setVelocityX(100*this.direction)))}}class d extends s.Physics.Arcade.Sprite{constructor(t,e,s){super(t,e,s,a.POWER_UP),t.add.existing(this),t.physics.add.existing(this),this.setScale(4),this.setCollideWorldBounds(!0),this.setImmovable(!0)}}class c extends s.Scene{constructor(){super("Game"),e(this,"camera"),e(this,"background"),e(this,"msg_text"),e(this,"powerUps"),e(this,"debrisManager"),e(this,"platformSpawnHeight",a.WINDOW_HEIGHT-4*a.TERRAIN_TILE_SIZE),e(this,"player"),e(this,"platforms",[]),e(this,"cursor"),e(this,"escKey"),e(this,"powerUp"),e(this,"hasDoubleJump",!1),e(this,"canDoubleJump",!1),e(this,"lastPowerUpHeight",0),e(this,"enemies",[]),e(this,"scoreText")}create(){var t,e;this.camera=this.cameras.main,this.background=this.add.image(0,0,"background").setOrigin(0,0),this.background.setDisplaySize(this.scale.width,this.scale.height),this.spawnPlayer();let s=new h(this,0,a.WINDOW_HEIGHT-a.TERRAIN_TILE_SIZE,a.PLATFORM,2);this.platforms.push(s),this.physics.add.collider(this.player.player,s.platform),this.spawnPlatforms(),this.spawnPlatforms(),this.spawnPlatforms(),this.spawnPlatforms(),this.debrisManager=new l(this),this.input.keyboard&&(this.escKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ESC)),this.time.addEvent({delay:2e3,callback:()=>{const t=Phaser.Math.Between(100,a.WINDOW_WIDTH-100),e=this.camera.scrollY;this.debrisManager.spawnDebris(this,t,e),this.physics.add.collider(this.player.player,this.debrisManager.debrisGroup,(()=>{this.sound.add(a.DEBRIS_HIT_AUDIO).play(),this.scene.start("GameOver")}))},loop:!0}),this.cursor=null==(e=null==(t=this.input)?void 0:t.keyboard)?void 0:e.createCursorKeys(),this.scoreText=this.add.text(50,50,"score : 0",{fontSize:"32px",color:"000000",stroke:"#ffffff",strokeThickness:8}),this.powerUps=this.physics.add.group(),this.physics.add.overlap(this.player.player,this.powerUps,this.collectPowerUp,void 0,this),this.spawnPowerUp(),this.spawnEnemies()}update(t,e){var s,i,r,o,l,n,h,E,p,d,c,_,I,T;((null==(s=this.player.player.body)?void 0:s.position.x)??0)<0&&this.player.player.setX(0+a.PLAYER_TILE_SIZE/2),((null==(i=this.player.player.body)?void 0:i.position.x)??0)>a.WINDOW_WIDTH-a.PLAYER_TILE_SIZE&&this.player.player.setX(a.WINDOW_WIDTH-a.PLAYER_TILE_SIZE/2),(null==(r=this.cursor)?void 0:r.left.isDown)?(this.player.player.setVelocityX(-160),this.player.player.flipX=!0,this.player.player.anims.play(a.PLAYER_RUN,!0)):(null==(o=this.cursor)?void 0:o.right.isDown)?(this.player.player.setVelocityX(160),this.player.player.flipX=!1,this.player.player.anims.play(a.PLAYER_RUN,!0)):this.player.player.setVelocityX(0),(null==(l=this.cursor)?void 0:l.up)&&Phaser.Input.Keyboard.JustDown(this.cursor.up)&&((null==(n=this.player.player.body)?void 0:n.touching.down)?(this.player.player.setVelocityY(-330),this.player.player.anims.play(a.PLAYER_JUMP,!0),this.hasDoubleJump&&(this.canDoubleJump=!0)):this.canDoubleJump&&(this.player.player.setVelocityY(-230),this.player.player.anims.play(a.PLAYER_JUMP,!0),this.canDoubleJump=!1)),(null==(h=this.player.player.body)?void 0:h.touching.down)&&this.hasDoubleJump&&(this.canDoubleJump=!0),Phaser.Input.Keyboard.JustDown(this.escKey)&&window.location.reload(),((null==(E=this.player.player.body)?void 0:E.velocity.y)??0)>0&&this.player.player.anims.play(a.PLAYER_FALL,!0),((null==(p=this.player.player.body)?void 0:p.velocity.y)??0)<0&&this.player.player.anims.play(a.PLAYER_JUMP,!0),0==((null==(d=this.player.player.body)?void 0:d.velocity.x)??0)&&0==((null==(c=this.player.player.body)?void 0:c.velocity.y)??0)&&this.player.player.anims.play(a.PLAYER_IDLE,!0),a.WINDOW_HEIGHT-5*a.TERRAIN_TILE_SIZE-((null==(_=this.player.player.body)?void 0:_.position.y)??0)>-this.camera.scrollY&&(this.camera.scrollY=-a.WINDOW_HEIGHT+5*a.TERRAIN_TILE_SIZE+((null==(I=this.player.player.body)?void 0:I.position.y)??0)),this.camera.scrollY-2*a.TERRAIN_TILE_SIZE<this.platformSpawnHeight&&(this.spawnPlatforms(),this.spawnEnemies()),-this.camera.scrollY+((null==(T=this.player.player.body)?void 0:T.position.y)??0)>a.WINDOW_HEIGHT&&this.scene.start("GameOver"),a.SCORE=10*-Math.floor(this.camera.scrollY/(3*a.TERRAIN_TILE_SIZE)),this.scoreText.setText("Score: "+a.SCORE),this.scoreText.setPosition(50,this.camera.scrollY+50),this.enemies.forEach((t=>t.update())),this.player.player.y<this.lastPowerUpHeight-6*a.TERRAIN_TILE_SIZE&&(this.spawnPowerUp(),this.lastPowerUpHeight=this.player.player.y),this.background.setPosition(0,this.camera.scrollY)}spawnPlatforms(){const t=o.getRandomPlatformX(),e=Math.random()<.5?new r(this,t,this.platformSpawnHeight,a.PLATFORM,2):new E(this,t,this.platformSpawnHeight,a.UNSTABLE_PLATFORM,0);this.platforms.push(e),this.physics.add.collider(this.player.player,e.platform,(()=>{e instanceof E&&!1===e.isShaking&&(e.isShaking=!0,e.platform.children.iterate((t=>(this.tweens.add({targets:t,x:"+=5",duration:50,ease:"Sine.easeInOut",repeat:10,yoyo:!0,onComplete:()=>{e.platform.children.iterate((t=>(t.body.setImmovable(!1),t.body.setVelocityY(300),!0)))}}),!0))))}));let s=o.getRandomPlatformX();for(;s===t;)s=o.getRandomPlatformX();const i=Math.random()<.5?new r(this,s,this.platformSpawnHeight,a.PLATFORM,2):new E(this,s,this.platformSpawnHeight,a.UNSTABLE_PLATFORM,0);this.platforms.push(i),this.physics.add.collider(this.player.player,i.platform,(()=>{i instanceof E&&!1===i.isShaking&&(i.isShaking=!0,i.platform.children.iterate((t=>(this.tweens.add({targets:t,x:"+=5",duration:50,ease:"Sine.easeInOut",repeat:10,yoyo:!0,onComplete:()=>{i.platform.children.iterate((t=>(t.body.setImmovable(!1),t.body.setVelocityY(300),!0)))}}),!0))))})),this.platformSpawnHeight-=3*a.TERRAIN_TILE_SIZE}spawnPlayer(){this.player=new n(this,a.WINDOW_WIDTH/2,a.WINDOW_HEIGHT-2*a.TERRAIN_TILE_SIZE,a.PLAYER_IDLE),this.player.player.anims.play(a.PLAYER_IDLE)}spawnEnemies(){this.platforms.forEach((t=>{var e;if(Math.random()<.2&&this.platformSpawnHeight>((null==(e=t.platform.getChildren()[0].body)?void 0:e.position.y)??0)-6*a.TERRAIN_TILE_SIZE){const e=t.platform.getChildren()[0],s=new p(this,e.x,e.y-a.TERRAIN_TILE_SIZE);this.enemies.push(s),s.enemy&&this.platforms.forEach((t=>{this.physics.add.collider(s.enemy,t.platform)})),this.physics.add.collider(this.player.player,s.enemy,(()=>{this.sound.add(a.ENEMY_HIT_AUDIO).play(),this.scene.start("GameOver")}))}}))}spawnPowerUp(){if(3===Phaser.Math.Between(1,5)){const t=Phaser.Utils.Array.GetRandom(this.platforms),e=t.platform.getChildren()[0],s=e.x,i=e.y-50,a=new d(this,s,i);this.powerUps.add(a),this.physics.add.collider(a,t.platform)}}collectPowerUp(t,e){this.hasDoubleJump=!0,e.destroy()}}class _ extends s.Scene{constructor(){super("GameOver"),e(this,"camera"),e(this,"gameover_text"),e(this,"score_text"),e(this,"mainButton"),e(this,"exitButton")}create(){const t=this.sound.get(a.BG_MUSIC_AUDIO);t&&t.isPlaying&&t.stop();let e=this.sound.get(a.GAME_OVER_AUDIO);e||(e=this.sound.add(a.GAME_OVER_AUDIO,{loop:!0,volume:.7})),e.isPlaying||e.play(),this.camera=this.cameras.main,this.camera.setBackgroundColor(16711680),this.gameover_text=this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}),this.gameover_text.setOrigin(.5),this.score_text=this.add.text(a.WINDOW_WIDTH/2,a.WINDOW_HEIGHT/2+100,"score : "+a.SCORE,{fontSize:"32px",color:"000000",stroke:"#ffffff",strokeThickness:8,align:"center"}),this.score_text.setOrigin(.5),this.mainButton=this.add.text(this.scale.width/2,600,"Main Menu",{fontFamily:"Verdana",fontSize:36,color:"#ffffff",backgroundColor:"#000000",padding:{x:30,y:15},align:"center"}).setOrigin(.5).setInteractive({useHandCursor:!0}),this.mainButton.on("pointerdown",(()=>{window.location.reload()})),this.exitButton=this.add.text(this.scale.width/2,700,"Exit",{fontFamily:"Verdana",fontSize:36,color:"#ffffff",backgroundColor:"#000000",padding:{x:30,y:15},align:"center"}).setOrigin(.5).setInteractive({useHandCursor:!0}),this.exitButton.on("pointerdown",(()=>{window.close()})),[this.mainButton,this.exitButton].forEach((t=>{t.on("pointerover",(()=>t.setStyle({backgroundColor:"#942222"}))),t.on("pointerout",(()=>t.setStyle({backgroundColor:(this.mainButton,"#000000")})))}))}}class I extends s.Scene{constructor(){super("MainMenu"),e(this,"background"),e(this,"logo"),e(this,"title"),e(this,"startButton"),e(this,"exitButton"),e(this,"music")}create(){let t=this.sound.get(a.BG_MUSIC_AUDIO);t?t.isPlaying||t.play():(t=this.sound.add(a.BG_MUSIC_AUDIO,{loop:!0,volume:.5}),t.play()),this.add.image(0,0,"background").setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height),this.logo=this.add.image(this.scale.width/2,250,"logo"),this.title=this.add.text(this.scale.width/2,500,"Main Menu",{fontFamily:"Papyrus, fantasy",fontSize:50,color:"#2ecc71",stroke:"#000000",strokeThickness:6,shadow:{offsetX:4,offsetY:4,color:"#000000",blur:4,fill:!0},align:"center"}).setOrigin(.5),this.startButton=this.add.text(this.scale.width/2,600,"Start Game",{fontFamily:"Verdana",fontSize:36,color:"#ffffff",backgroundColor:"#007700",padding:{x:30,y:15},align:"center"}).setOrigin(.5).setInteractive({useHandCursor:!0}),this.startButton.on("pointerdown",(()=>{this.sound.add(a.BUTTON_AUDIO).play(),this.scene.start("Game")})),this.exitButton=this.add.text(this.scale.width/2,700,"Exit",{fontFamily:"Verdana",fontSize:36,color:"#ffffff",backgroundColor:"#005500",padding:{x:30,y:15},align:"center"}).setOrigin(.5).setInteractive({useHandCursor:!0}),this.exitButton.on("pointerdown",(()=>{window.close()})),[this.startButton,this.exitButton].forEach((t=>{t.on("pointerover",(()=>t.setStyle({backgroundColor:"#009900"}))),t.on("pointerout",(()=>t.setStyle({backgroundColor:t===this.startButton?"#007700":"#005500"})))}))}}class T extends s.Scene{constructor(){super("Preloader")}init(){this.add.image(0,0,"background").setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height),this.add.rectangle(this.scale.width/2,this.scale.height/2,468,32).setStrokeStyle(1,16777215);const t=this.add.rectangle(this.scale.width/2-230,this.scale.height/2,4,28,16777215);this.load.on("progress",(e=>{t.width=4+460*e}))}preload(){this.load.setPath("assets"),this.load.image("logo","EcoTowerLogo.png"),this.load.spritesheet(a.PLATFORM,a.PLATFORM_TEXTURE_PATH,{frameWidth:a.TERRAIN_TILE_SIZE,frameHeight:a.TERRAIN_TILE_SIZE}),this.load.spritesheet(a.UNSTABLE_PLATFORM,a.UNSTABLE_PLATFORM_PATH,{frameWidth:a.TERRAIN_TILE_SIZE,frameHeight:a.TERRAIN_TILE_SIZE}),this.load.image(a.DEBRIS,a.DEBRIS_TEXTURE_PATH),this.load.spritesheet(a.ENEMY,a.ENEMY_TEXTURE_PATH,{frameWidth:38,frameHeight:38}),this.load.spritesheet(a.PLAYER_IDLE,a.PLAYER_IDLE_TEXTURE_PATH,{frameWidth:a.PLAYER_TILE_SIZE,frameHeight:a.PLAYER_TILE_SIZE}),this.load.spritesheet(a.PLAYER_RUN,a.PLAYER_RUN_TEXTURE_PATH,{frameWidth:a.PLAYER_TILE_SIZE,frameHeight:a.PLAYER_TILE_SIZE}),this.load.spritesheet(a.PLAYER_JUMP,a.PLAYER_JUMP_TEXTURE_PATH,{frameWidth:a.PLAYER_TILE_SIZE,frameHeight:a.PLAYER_TILE_SIZE}),this.load.spritesheet(a.PLAYER_FALL,a.PLAYER_FALL_TEXTURE_PATH,{frameWidth:a.PLAYER_TILE_SIZE,frameHeight:a.PLAYER_TILE_SIZE}),this.load.audio(a.BG_MUSIC_AUDIO,a.BG_MUSIC_TEXTURE_PATH),this.load.audio(a.BUTTON_AUDIO,a.BUTTON_AUDIO_TEXTURE_PATH),this.load.audio(a.DEBRIS_HIT_AUDIO,a.DEBRIS_HIT_AUDIO_TEXTURE_PATH),this.load.audio(a.ENEMY_HIT_AUDIO,a.ENEMY_HIT_AUDIO_TEXTURE_PATH),this.load.audio(a.PLAYER_JUMP_AUDIO,a.PLAYER_JUMP_AUDIO_TEXTURE_PATH),this.load.audio(a.PLAYER_RUN_AUDIO,a.PLAYER_RUN_AUDIO_TEXTURE_PATH),this.load.audio(a.GAME_OVER_AUDIO,a.GAME_OVER_AUDIO_TEXTURE_PATH),this.load.image(a.POWER_UP,a.POWER_UP_TEXTURE_PATH)}create(){this.scene.start("MainMenu")}}const m={type:Phaser.AUTO,width:a.WINDOW_WIDTH,height:a.WINDOW_HEIGHT,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{x:0,y:300},debug:!1}},scene:[i,T,I,c,_]};new s.Game(m);
